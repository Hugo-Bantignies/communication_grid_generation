<!DOCTYPE html>
<meta charset="utf-8">
        
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v6.js"></script>
        
<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>

<script>

	//Bostock's margin convention
	var margin = {top: 10, right: 10, bottom: 20, left: 70},
			width  = 720 - margin.left - margin.right,
			height = 480 - margin.top - margin.bottom;

	// append the svg object to the body of the page
	const svg = d3.select("#my_dataviz")
	.append("svg")
	  .attr("width", width + margin.left + margin.right)
	  .attr("height", height + margin.top + margin.bottom)
	.append("g")
	  .attr("transform", `translate(${margin.left},${margin.top})`);

	// Build X scales and axis:
	const x = d3.scaleLinear()
	  .range([ 0, width ])
	  .domain([0,100])
	svg.append("g")
	  .attr("transform", `translate(0, ${height})`)
	  .call(d3.axisBottom(x))
	
	// Build Y scales and axis:
	const y = d3.scaleLinear()
	  .range([ height, 0 ])
	  .domain([0,100])
	svg.append("g")
	  .call(d3.axisLeft(y));
	
	// Build color scale
	const myColor = d3.scaleLinear()
	  .range(["white", "#69b3a2"])
	  .domain([1,100])
	
	//Read the data
	d3.csv("../../default.csv",d => (
		{
			word: d.word,
			row: +d.row,
			col: +d.col,
			page: d.page,
			identifier: d.identifier
		}
	)).then( function(data) {
	
	  svg.selectAll()
		  .data(data, function(d) {return d.word+':'+d.word;})
		  .enter()
		  .join("rect")
		  .attr("x", function(d) { return x(d.row) })
		  .attr("y", function(d) { return y(d.col) })
		  .attr("width", x.bandwidth() )
		  .attr("height", y.bandwidth() )
		  .style("fill", function(d) { return myColor(d.col)} )
	
	})
	</script>